Watching for file changes with StatReloader
Watching for file changes with StatReloader
Watching for file changes with StatReloader
Watching for file changes with StatReloader
Watching for file changes with StatReloader
"GET /api/calculations/yapi-turleri/ HTTP/1.1" 200 1295
"GET /api/calculations/yapi-turleri/ HTTP/1.1" 200 1295
"GET /api/calculations/arazi-tipleri/ HTTP/1.1" 200 592
"GET /api/calculations/arazi-tipleri/ HTTP/1.1" 200 592
"OPTIONS /api/calculations/tarimsal-depo/ HTTP/1.1" 200 0
Tarimsal amacli depo calculation request: {'alan_m2': 5000, 'arazi_vasfi': 'Tarla', 'emsal_turu': 'marjinal', 'emsal_orani': 0.2, 'yapi_turu_id': 6}
Tarimsal amacli depo calculation result: {'success': True, 'message': '', 'calculations': {}, 'sonuc': 'TARIMSAL DEPO YAPILABİLİR - Marjinal tarım arazileri (%20)', 'mesaj': '<div style="font-family: Arial, sans-serif; line-height: 1.6; color: #333;">\n    <div style="background-color: #d4edda; padding: 15px; border-radius: 8px; margin: 15px 0;">\n        <h4 style="color: #155724; margin-top: 0;">🏬 Tarımsal Amaçlı Depo Hesaplama Sonucu</h4>\n        <p><strong>Sonuç:</strong> TARIMSAL DEPO YAPILABİLİR - Marjinal tarım arazileri (%20)</p>\n        \n        <div style="background-color: #fff3cd; padding: 10px; border-radius: 5px; margin: 10px 0; border-left: 4px solid #ffc107;">\n            <p style="margin: 0; font-weight: bold; color: #856404;">🎯 PHASE 2: Dinamik Emsal Sistemi</p>\n            <p style="margin: 5px 0 0 0; color: #856404;">Bu tesiste <strong>Marjinal tarım arazileri (%20)</strong> uygulanmaktadır.</p>\n        </div>\n        \n        <div style="margin: 15px 0;">\n            <h5 style="color: #155724;">📊 Hesaplama Detayları:</h5>\n            <ul style="margin: 0; padding-left: 20px;">\n                <li><strong>Arazi Alanı:</strong> 5,000 m²</li>\n                <li><strong>Dinamik Emsal Oranı:</strong> 20% (Marjinal tarım arazileri (%20))</li>\n                <li><strong>Maksimum Emsal Hakkı:</strong> 1,000.0 m²</li>\n            </ul>\n        </div>\n        \n        <div style="margin: 15px 0;">\n            <h5 style="color: #155724;">🏗️ Yapı Alanları:</h5>\n            <ul style="margin: 0; padding-left: 20px;">\n                <li><strong>Depo Alanı:</strong> 150 m²</li>\n                <li><strong>İdari Alan:</strong> 30 m²</li>\n                <li><strong>Teknik Alan:</strong> 20 m²</li>\n                <li><strong>Toplam Yapı Alanı:</strong> 200 m²</li>\n                <li><strong>Kalan Emsal Hakkı:</strong> 800.0 m²</li>\n                <li><strong>Emsal Kullanım Oranı:</strong> 20.0%</li>\n            </ul>\n        </div>\n    </div>\n</div>', 'html_mesaj': '<div style="font-family: Arial, sans-serif; line-height: 1.6; color: #333;">\n    <div style="background-color: #d4edda; padding: 15px; border-radius: 8px; margin: 15px 0;">\n        <h4 style="color: #155724; margin-top: 0;">🏬 Tarımsal Amaçlı Depo Hesaplama Sonucu</h4>\n        <p><strong>Sonuç:</strong> TARIMSAL DEPO YAPILABİLİR - Marjinal tarım arazileri (%20)</p>\n        \n        <div style="background-color: #fff3cd; padding: 10px; border-radius: 5px; margin: 10px 0; border-left: 4px solid #ffc107;">\n            <p style="margin: 0; font-weight: bold; color: #856404;">🎯 PHASE 2: Dinamik Emsal Sistemi</p>\n            <p style="margin: 5px 0 0 0; color: #856404;">Bu tesiste <strong>Marjinal tarım arazileri (%20)</strong> uygulanmaktadır.</p>\n        </div>\n        \n        <div style="margin: 15px 0;">\n            <h5 style="color: #155724;">📊 Hesaplama Detayları:</h5>\n            <ul style="margin: 0; padding-left: 20px;">\n                <li><strong>Arazi Alanı:</strong> 5,000 m²</li>\n                <li><strong>Dinamik Emsal Oranı:</strong> 20% (Marjinal tarım arazileri (%20))</li>\n                <li><strong>Maksimum Emsal Hakkı:</strong> 1,000.0 m²</li>\n            </ul>\n        </div>\n        \n        <div style="margin: 15px 0;">\n            <h5 style="color: #155724;">🏗️ Yapı Alanları:</h5>\n            <ul style="margin: 0; padding-left: 20px;">\n                <li><strong>Depo Alanı:</strong> 150 m²</li>\n                <li><strong>İdari Alan:</strong> 30 m²</li>\n                <li><strong>Teknik Alan:</strong> 20 m²</li>\n                <li><strong>Toplam Yapı Alanı:</strong> 200 m²</li>\n                <li><strong>Kalan Emsal Hakkı:</strong> 800.0 m²</li>\n                <li><strong>Emsal Kullanım Oranı:</strong> 20.0%</li>\n            </ul>\n        </div>\n    </div>\n</div>', 'izin_durumu': 'izin_verilebilir', 'depolama_kapasitesi_ton': 375.0, 'maksimum_insaat_alani_m2': 200, 'detaylar': {'arazi_alani': 5000.0, 'emsal_orani': '20%', 'maksimum_emsal': 1000.0, 'depo_alani': 150, 'idari_alan': 30, 'teknik_alan': 20, 'toplam_yapi_alani': 200, 'kalan_emsal': 800.0, 'emsal_kullanim_orani': '20.0%', 'izin_durumu': 'izin_verilebilir', 'depolama_kapasitesi_ton': 375.0}}
"POST /api/calculations/tarimsal-depo/ HTTP/1.1" 200 4340
/home/akn/Genel/imar/webimar-api/webimar_api/settings.py changed, reloading.
Not Found: /
"GET / HTTP/1.1" 404 179
Not Found: /favicon.ico
"GET /favicon.ico HTTP/1.1" 404 179
Internal Server Error: /admin/sevgi-yonetimi/
Traceback (most recent call last):
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/sessions/backends/base.py", line 244, in _get_session
    return self._session_cache
           ^^^^^^^^^^^^^^^^^^^
AttributeError: 'SessionStore' object has no attribute '_session_cache'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/backends/sqlite3/base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such table: django_session

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/admin/sites.py", line 265, in wrapper
    return self.admin_view(view, cacheable)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/utils/decorators.py", line 192, in _view_wrapper
    result = _process_exception(request, e)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/utils/decorators.py", line 190, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/views/decorators/cache.py", line 80, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/admin/sites.py", line 234, in inner
    if not self.has_permission(request):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/admin/sites.py", line 207, in has_permission
    return request.user.is_active and request.user.is_staff
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/utils/functional.py", line 251, in inner
    self._setup()
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/utils/functional.py", line 404, in _setup
    self._wrapped = self._setupfunc()
                    ^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/auth/middleware.py", line 39, in <lambda>
    request.user = SimpleLazyObject(lambda: get_user(request))
                                            ^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/auth/middleware.py", line 19, in get_user
    request._cached_user = auth.get_user(request)
                           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/auth/__init__.py", line 304, in get_user
    user_id = _get_user_session_key(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/auth/__init__.py", line 95, in _get_user_session_key
    return get_user_model()._meta.pk.to_python(request.session[SESSION_KEY])
                                               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/sessions/backends/base.py", line 55, in __getitem__
    return self._session[key]
           ^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/sessions/backends/base.py", line 249, in _get_session
    self._session_cache = self.load()
                          ^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/sessions/backends/db.py", line 55, in load
    s = self._get_session_from_db()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/sessions/backends/db.py", line 34, in _get_session_from_db
    return self.model.objects.get(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/models/query.py", line 629, in get
    num = len(clone)
          ^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/models/query.py", line 366, in __len__
    self._fetch_all()
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1935, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1622, in execute_sql
    cursor.execute(sql, params)
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/backends/sqlite3/base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.OperationalError: no such table: django_session
"GET /admin/sevgi-yonetimi/ HTTP/1.1" 500 145
Internal Server Error: /admin/
Traceback (most recent call last):
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/sessions/backends/base.py", line 244, in _get_session
    return self._session_cache
           ^^^^^^^^^^^^^^^^^^^
AttributeError: 'SessionStore' object has no attribute '_session_cache'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/backends/sqlite3/base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such table: django_session

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/admin/sites.py", line 265, in wrapper
    return self.admin_view(view, cacheable)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/utils/decorators.py", line 192, in _view_wrapper
    result = _process_exception(request, e)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/utils/decorators.py", line 190, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/views/decorators/cache.py", line 80, in _view_wrapper
    response = view_func(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/admin/sites.py", line 234, in inner
    if not self.has_permission(request):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/admin/sites.py", line 207, in has_permission
    return request.user.is_active and request.user.is_staff
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/utils/functional.py", line 251, in inner
    self._setup()
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/utils/functional.py", line 404, in _setup
    self._wrapped = self._setupfunc()
                    ^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/auth/middleware.py", line 39, in <lambda>
    request.user = SimpleLazyObject(lambda: get_user(request))
                                            ^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/auth/middleware.py", line 19, in get_user
    request._cached_user = auth.get_user(request)
                           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/auth/__init__.py", line 304, in get_user
    user_id = _get_user_session_key(request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/auth/__init__.py", line 95, in _get_user_session_key
    return get_user_model()._meta.pk.to_python(request.session[SESSION_KEY])
                                               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/sessions/backends/base.py", line 55, in __getitem__
    return self._session[key]
           ^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/sessions/backends/base.py", line 249, in _get_session
    self._session_cache = self.load()
                          ^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/sessions/backends/db.py", line 55, in load
    s = self._get_session_from_db()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/contrib/sessions/backends/db.py", line 34, in _get_session_from_db
    return self.model.objects.get(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/models/query.py", line 629, in get
    num = len(clone)
          ^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/models/query.py", line 366, in __len__
    self._fetch_all()
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1935, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1622, in execute_sql
    cursor.execute(sql, params)
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akn/Genel/webimar/webimar-api/venv/lib/python3.12/site-packages/django/db/backends/sqlite3/base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.OperationalError: no such table: django_session
"GET /admin/ HTTP/1.1" 500 145
